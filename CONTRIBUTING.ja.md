# 貢献ガイドライン

*他の言語で読む: [English](CONTRIBUTING.md)*

文化の森お出かけパス施設休館情報エージェントプロジェクトへの貢献をお考えいただき、ありがとうございます！このドキュメントでは、プロジェクトに貢献する方法について説明します。

## 🤝 貢献の方法

### 1. Issue の報告

バグを発見した場合や新機能の提案がある場合は、まずGitHubのIssuesページで既存のIssueを確認してください。

#### バグレポート

バグを報告する際は、以下の情報を含めてください：

- **環境情報**: OS、Pythonバージョン、依存関係のバージョン
- **再現手順**: バグを再現するための詳細な手順
- **期待される動作**: 本来どのような動作をするべきか
- **実際の動作**: 実際に何が起こったか
- **エラーメッセージ**: 関連するエラーメッセージやログ

#### 機能要望

新機能を提案する際は、以下を含めてください：

- **機能の概要**: 提案する機能の詳細な説明
- **使用例**: どのような場面で使用されるか
- **実装の提案**: 可能であれば実装方法の提案
- **代替案**: 他の解決方法があるかどうか

### 2. プルリクエストの作成

#### 事前準備

1. **フォーク**: このリポジトリを自分のGitHubアカウントにフォーク
2. **クローン**: フォークしたリポジトリをローカルにクローン
3. **ブランチ作成**: 作業用のブランチを作成

```bash
git clone https://github.com/your-username/repository-name.git
cd repository-name
git checkout -b feature/your-feature-name
```

#### 開発の流れ

1. **環境構築**: 開発環境をセットアップ（後述の開発環境セットアップを参照）
2. **コード変更**: 必要な変更を実装
3. **テスト**: 変更が正しく動作することを確認
4. **コミット**: 適切なコミットメッセージで変更をコミット
5. **プッシュ**: 変更をフォークしたリポジトリにプッシュ
6. **プルリクエスト**: GitHubでプルリクエストを作成

#### プルリクエストのガイドライン

- **明確なタイトル**: 変更内容が分かりやすいタイトルを付ける
- **詳細な説明**: 何を変更したか、なぜ変更したかを説明
- **関連Issue**: 関連するIssueがあれば参照
- **テスト結果**: テストが通ることを確認
- **ドキュメント更新**: 必要に応じてドキュメントも更新

## 🛠️ 開発環境のセットアップ

### 必要なソフトウェア

- **Python 3.8以上**
- **Git**
- **AWS CLI** (テスト用)

### セットアップ手順

1. **リポジトリのクローン**

```bash
git clone https://github.com/your-username/repository-name.git
cd repository-name
```

2. **仮想環境の作成**

```bash
# Windows
python -m venv .venv
.venv\Scripts\activate

# macOS/Linux
python -m venv .venv
source .venv/bin/activate
```

3. **依存関係のインストール**

```bash
# 基本依存関係
pip install -r requirements.txt

# 開発用依存関係（存在する場合）
pip install -r requirements-dev.txt
```

4. **AWS設定（テスト用）**

```bash
aws configure
# または環境変数で設定
export AWS_ACCESS_KEY_ID="your-key"
export AWS_SECRET_ACCESS_KEY="your-secret"
export AWS_DEFAULT_REGION="us-west-2"
```

### 開発用ツール

推奨する開発用ツール：

- **エディタ**: VS Code、PyCharm、または任意のテキストエディタ
- **フォーマッター**: black、autopep8
- **リンター**: flake8、pylint
- **型チェッカー**: mypy

## 📝 コーディング規約

### Python コーディングスタイル

- **PEP 8**: Python標準コーディング規約に準拠
- **行の長さ**: 最大88文字（blackのデフォルト）
- **インデント**: スペース4つ
- **文字エンコーディング**: UTF-8

### 命名規則

- **変数・関数**: snake_case
- **クラス**: PascalCase
- **定数**: UPPER_SNAKE_CASE
- **プライベート**: アンダースコア1つで開始

### ドキュメント

- **docstring**: すべての関数・クラスにdocstringを記載
- **型ヒント**: 可能な限り型ヒントを使用
- **コメント**: 複雑なロジックには適切なコメントを追加

```python
def check_facility_closure(facility_name: str, date: str) -> str:
    """
    指定された施設の休館情報を取得します。
    
    Args:
        facility_name (str): 施設名
        date (str): 確認したい日付（YYYY-MM-DD形式または自然言語）
    
    Returns:
        str: 休館情報のJSON文字列
    
    Raises:
        ValueError: 無効な施設名または日付形式の場合
    """
    # 実装...
```

## 🧪 テスト

### テストの実行

```bash
# 基本的なテスト
python -c "from agent import check_facility_closure; print(check_facility_closure('金沢21世紀美術館', '2025-01-01'))"

# 複数施設のテスト
python -c "
from config import FACILITIES
from agent import check_facility_closure
for facility in list(FACILITIES.keys())[:3]:
    result = check_facility_closure(facility, '明日')
    print(f'{facility}: OK')
"
```

### テストケースの追加

新機能を追加する際は、適切なテストケースも追加してください：

```python
def test_facility_closure_basic():
    """基本的な施設休館情報取得のテスト"""
    result = check_facility_closure('金沢21世紀美術館', '2025-01-01')
    assert result is not None
    assert 'facility' in result
```

## 🔍 コードレビュー

### レビューのポイント

プルリクエストは以下の観点でレビューされます：

- **機能性**: 期待通りに動作するか
- **コード品質**: 読みやすく保守しやすいか
- **パフォーマンス**: 効率的な実装か
- **セキュリティ**: セキュリティ上の問題はないか
- **テスト**: 適切にテストされているか
- **ドキュメント**: 必要なドキュメントが更新されているか

### レビューへの対応

- **建設的な議論**: レビューコメントには丁寧に対応
- **迅速な修正**: 指摘された問題は速やかに修正
- **説明**: 実装の理由や背景を適切に説明

## 🏗️ プロジェクト構造

### ディレクトリ構成

```
文化の森お出かけパス施設休館情報エージェント/
├── agent.py                    # メインのAgentCoreエージェント
├── facility_scraper.py         # 施設情報スクレイピング機能
├── config.py                   # 設定ファイル
├── deploy.py                   # デプロイメント機能
├── setup.py                    # セットアップスクリプト
├── requirements.txt            # 依存関係
├── .bedrock_agentcore.yaml     # AgentCore設定
├── Dockerfile                  # コンテナ設定
├── README.md                   # プロジェクト説明
├── CONTRIBUTING.md             # このファイル
├── LICENSE                     # ライセンス
└── .gitignore                  # Git除外設定
```

### 主要コンポーネント

- **agent.py**: メインのエージェント機能
- **facility_scraper.py**: Webスクレイピング機能
- **config.py**: 施設情報と設定の管理

## 🚀 リリースプロセス

### バージョニング

- **セマンティックバージョニング**: MAJOR.MINOR.PATCH形式
- **MAJOR**: 互換性のない変更
- **MINOR**: 後方互換性のある機能追加
- **PATCH**: 後方互換性のあるバグ修正

### リリース手順

1. **変更のテスト**: すべての変更が正しく動作することを確認
2. **ドキュメント更新**: README.mdやその他のドキュメントを更新
3. **バージョン更新**: 適切なバージョン番号を設定
4. **タグ作成**: Gitタグを作成してリリース

## 📞 コミュニケーション

### 質問・相談

- **GitHub Issues**: バグ報告や機能要望
- **GitHub Discussions**: 一般的な質問や議論
- **プルリクエスト**: コードレビューや実装に関する議論

### コミュニケーションのガイドライン

- **丁寧な言葉遣い**: 建設的で尊重のあるコミュニケーション
- **明確な説明**: 問題や提案を明確に説明
- **日本語優先**: 日本語でのコミュニケーションを推奨
- **英語対応**: 必要に応じて英語でも対応

## 🎯 貢献の種類

### コード貢献

- **バグ修正**: 既存のバグの修正
- **新機能**: 新しい機能の実装
- **パフォーマンス改善**: 処理速度やメモリ使用量の最適化
- **リファクタリング**: コードの構造改善

### ドキュメント貢献

- **README更新**: プロジェクト説明の改善
- **コメント追加**: コード内のコメント充実
- **使用例追加**: 実用的な使用例の追加
- **翻訳**: 多言語対応

### その他の貢献

- **テスト追加**: テストケースの充実
- **Issue管理**: Issueの整理や分類
- **レビュー**: プルリクエストのレビュー
- **普及活動**: プロジェクトの紹介や宣伝

## 🏆 貢献者の認識

### 貢献者リスト

すべての貢献者はREADME.mdの貢献者セクションに記載されます。

### 貢献の種類別認識

- **コード貢献**: GitHubのコントリビューターとして表示
- **ドキュメント貢献**: ドキュメント作成者として記載
- **Issue報告**: 問題発見者として記載
- **レビュー**: レビュアーとして記載

## 📋 チェックリスト

プルリクエストを作成する前に、以下をチェックしてください：

- [ ] コードがPEP 8に準拠している
- [ ] 適切なdocstringが記載されている
- [ ] テストが通ることを確認した
- [ ] 関連するドキュメントを更新した
- [ ] コミットメッセージが適切である
- [ ] 変更内容がIssueと関連している（該当する場合）

## 🙏 謝辞

このプロジェクトに貢献してくださるすべての方に感謝いたします。皆様の貢献により、より良いソフトウェアを作ることができます。

---

ご質問やご不明な点がございましたら、お気軽にIssueやDiscussionsでお尋ねください。皆様の貢献をお待ちしております！